---
title: 1143.Longest Common Subsequence
date: 2025-08-21
category: 'leetcode'
---

[1143. Longest Common Subsequence](https://leetcode.cn/problems/longest-common-subsequence/)

ä»Žå³å¾€å·¦é€’å½’ï¼Œæ–¹ä¾¿1:1ç¿»è¯‘æˆä»Žå·¦å¾€å³çš„é€’æŽ¨

## [[0] _ (m+1) for \_ in range((n+1))] å’Œ [[0] _ (m+1)] \* (n+1) çš„åŒºåˆ«

å¥½é—®é¢˜ ðŸ‘
è¿™ä¸¤ä¸ªçœ‹èµ·æ¥å¾ˆåƒï¼Œä½†å·®åˆ«éžå¸¸å¤§ã€‚æˆ‘ä»¬é€ä¸ªåˆ†æžï¼š

---

## 1. å†™æ³•ä¸€ï¼šåˆ—è¡¨æŽ¨å¯¼å¼

```python
f = [[0] * (m+1) for _ in range(n+1)]
```

- æ¯æ¬¡å¾ªçŽ¯éƒ½ä¼šæ–°å»ºä¸€ä¸ª **ç‹¬ç«‹çš„åˆ—è¡¨**ã€‚
- æ‰€ä»¥æ€»å…±æœ‰ `n+1` ä¸ªä¸åŒçš„å­åˆ—è¡¨ã€‚
- ä¿®æ”¹æŸä¸€è¡Œä¸ä¼šå½±å“åˆ°å…¶ä»–è¡Œã€‚

âœ… è¿™æ˜¯æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„äºŒç»´æ•°ç»„ï¼ˆçŸ©é˜µï¼‰ã€‚

ä¾‹å­ï¼š

```python
m, n = 2, 2
f = [[0] * (m+1) for _ in range(n+1)]
f[0][0] = 1
print(f)
```

è¾“å‡ºï¼š

```
[[1, 0, 0],
 [0, 0, 0],
 [0, 0, 0]]
```

---

## 2. å†™æ³•äºŒï¼šåˆ—è¡¨ä¹˜æ³•

```python
f = [[0] * (m+1)] * (n+1)
```

- å¤–å±‚å…¶å®žæ˜¯æŠŠ **åŒä¸€ä¸ªå­åˆ—è¡¨çš„å¼•ç”¨å¤åˆ¶äº† n+1 æ¬¡**ã€‚
- æ‰€ä»¥æ‰€æœ‰è¡Œéƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚
- æ”¹åŠ¨ä¸€è¡Œï¼Œå…¶ä»–è¡Œä¹Ÿä¼šåŒæ—¶å˜ã€‚

âŒ è¿™é€šå¸¸æ˜¯ bugã€‚

ä¾‹å­ï¼š

```python
m, n = 2, 2
f = [[0] * (m+1)] * (n+1)
f[0][0] = 1
print(f)
```

è¾“å‡ºï¼š

```
[[1, 0, 0],
 [1, 0, 0],
 [1, 0, 0]]
```

å¯ä»¥çœ‹åˆ°ï¼Œæœ¬æ¥åªæ”¹ `f[0][0]`ï¼Œç»“æžœä¸‰è¡Œçš„ç¬¬ä¸€åˆ—éƒ½å˜äº†ã€‚

---

## âœ… æ€»ç»“

- `[[0] * (m+1) for _ in range(n+1)]`
  â†’ æ­£ç¡®äºŒç»´çŸ©é˜µï¼Œè¡Œä¹‹é—´ç‹¬ç«‹ã€‚
- `[[0] * (m+1)] * (n+1)`
  â†’ æ¯è¡Œå…¶å®žæ˜¯åŒä¸€ä¸ªåˆ—è¡¨çš„åˆ«åï¼Œä¿®æ”¹ä¼šè”åŠ¨ï¼Œå®¹æ˜“å‡º bugã€‚

```python
#
# @lc app=leetcode.cn id=1143 lang=python3
#
# [1143] æœ€é•¿å…¬å…±å­åºåˆ—
#

# @lc code=start
class Solution:
    def longestCommonSubsequence(self, text1: str, text2: str) -> int:
        n = len(text1)
        m = len(text2)
        # @cache
        # def dfs(i, j):
        #     if i < 0 or j < 0:
        #         return 0
        #     if text1[i] == text2[j]:
        #         return dfs(i-1, j-1) + 1
        #     return max(dfs(i-1, j), dfs(i, j-1))
        # return dfs(n-1, m-1)

        f = [[0] * (m+1) for _ in range((2))]
        for i, x in enumerate(text1):
            for j, y in enumerate(text2):
                if x == y:
                    f[(i+1)%2][j+1] = f[i%2][j] + 1
                else:
                    f[(i+1)%2][j+1] = max(f[i%2][j+1], f[(i+1)%2][j])
        return f[n%2][m]

# @lc code=end


```
